{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <title>{% block title %}  {% endblock title %} | The Vibes Virtual Clinic</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300, 400, 700" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.thevibesclinic.com/vvc/css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.thevibesclinic.com/vvc/css/animate.css">
    <link rel="stylesheet" href="https://cdn.thevibesclinic.com/vvc/css/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdn.thevibesclinic.com/vvc/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="https://cdn.thevibesclinic.com/vvc/css/jquery.timepicker.css">

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css">
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">

    <!-- alert style shit from jQuery -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.4/jquery-confirm.min.css">

    <!-- Theme Style -->
    <link rel="stylesheet" href="https://cdn.thevibesclinic.com/vvc/css/style.css">
  </head>

  <body>

    <header role="banner">
      <div class="top-bar">
        <div class="container">
          <div class="row">
            <div class="col-md-6 col-sm-6 col-5">
              <ul class="social list-unstyled">
                <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
                <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                <li><a href="#"><i class="fab fa-instagram"></i></a></li>
              </ul>
            </div>
            <div class="col-md-6 col-sm-6 col-7 text-right">
              <p class="mb-0">
                <a href="#" class="cta-btn" data-toggle="modal" data-target="{% if request.user.is_authenticated %}#modalAppointmentRoom{% else %}#modalAppointment{% endif %}">Live Consultations</a></p>
            </div>
          </div>
        </div>
      </div>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
          <a class="navbar-brand" href="/">The Vibes<span>Virtual Clinic</span>  </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample05" aria-controls="navbarsExample05" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarsExample05">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link active" href="/">Home</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Services</a>
                <div class="dropdown-menu" aria-labelledby="dropdown04">
                  <a class="dropdown-item" href="#">We Offer</a>
                  <a class="dropdown-item" href="#">Departments</a>
                  <a class="dropdown-item" href="#">Pricing</a>
                </div>

              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="dropdown05" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Tools</a>
                <div class="dropdown-menu" aria-labelledby="dropdown05">
                  <a class="dropdown-item" href="#">Medical Tools</a>
                  <a class="dropdown-item" href="#">Chat With A Practitioner</a>
                </div>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">News</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Contact</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <!-- END header -->

    {% if request.path == '/' %}
        <section class="home-slider owl-carousel">
          <div class="slider-item" style="background-image: url('https://cdn.thevibesclinic.com/vvc/img/slider-2.jpg');">
            <div class="container">
              <div class="row slider-text align-items-center">
                <div class="col-md-7 col-sm-12 element-animate">
                  <h1>We Care For You</h1>
                  <p>
                      At An Affordable Cost Be Assured To Get Professional Consultation From Only The Best Medical Practitioners.
                      All Doctors On Our Platform Has Gone Through A Stringent Verification Process
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div class="slider-item" style="background-image: url('https://cdn.thevibesclinic.com/vvc/img/slider-1.jpg');">
            <div class="container">
              <div class="row slider-text align-items-center">
                <div class="col-md-7 col-sm-12 element-animate">
                  <h1 style="color: darkslategray">We Provide Health Care Solutions</h1>
                  <p style="color: darkslategray">
                      We assure only the very best for you. Get ready to experience a one of a kind healthcare service that comes to you
                      through cutting edge technology and tools.
                  </p>
                </div>
              </div>
            </div>
          </div>

        </section>
    {% else %}
        <section class="home-slider inner-page owl-carousel">
          <div class="slider-item" style="background-image: url('https://cdn.thevibesclinic.com/vvc/img/slider-2.jpg');">

            <div class="container">
              <div class="row slider-text align-items-center">
                <div class="col-md-7 col-sm-12 element-animate">
                  <h1>{% block header-content %}{% endblock header-content %}</h1>
                  <p>{% block header-description %}{% endblock header-description %}</p>
                </div>
              </div>
            </div>

          </div>

        </section>
        <!-- END slider -->
    {% endif %}
    <!-- END slider -->

    {% block content %}

    {% endblock content %}


    <a href="#" class="cta-link element-animate" data-animate-effect="fadeIn" data-toggle="modal" data-target="{% if request.user.is_authenticated %}#modalAppointmentRoom{% else %}#modalAppointment{% endif %}">
      <span class="sub-heading">Need A Medical Assistance?</span>
      <span class="heading">Get Live Consultations Now</span>
    </a>
    <!-- END cta-link -->

    <footer class="site-footer" role="contentinfo">
      <div class="container">
        <div class="row mb-5 element-animate">
          <div class="col-md-3 mb-5">
            <h3>Services</h3>
            <ul class="footer-link list-unstyled">
              <li><a href="#">Find a doctor</a></li>
              <li><a href="#">Urgent Care</a></li>
              <li><a href="#">Emergency Care</a></li>
              <li><a href="#">Procedures &amp; Treatments</a></li>
              <li><a href="#">Online Services</a></li>
            </ul>
          </div>
          <div class="col-md-3 mb-5">
            <h3>Latest News</h3>
            <ul class="footer-link list-unstyled">
              <li><a href="#">News &amp; Press Releases</a></li>
              <li><a href="#">Health Care Professional News</a></li>
              <li><a href="#">Events &amp; Conferences</a></li>
            </ul>
          </div>
          <div class="col-md-3 mb-5">
            <h3>About</h3>
            <ul class="footer-link list-unstyled">
              <li><a href="#">About The Hospital</a></li>
              <li><a href="#">Testimonials</a></li>
              <li><a href="#">Accreditations &amp; Awards</a></li>
              <li><a href="#">Careers</a></li>
              <li><a href="#">Feedback</a></li>
            </ul>
          </div>
          <div class="col-md-3 mb-5">
            <h3>Location &amp; Contact</h3>
            <p class="mb-5">134 Street Name, City Name Here, United States</p>

            <h4 class="text-uppercase mb-3 h6 text-white">Email</h4>
            <p class="mb-5"><a href="mailto:info@yourdomain.com">medic@thevibesclinic.com</a></p>

            <h4 class="text-uppercase mb-3 h6 text-white">Phone</h4>
            <p>+1 24 435 3533</p>

          </div>
        </div>

        <div class="row pt-md-3 element-animate">
          <div class="col-md-12">
            <hr class="border-t">
          </div>
          <div class="col-md-6 col-sm-12 copyright">
              <p>&copy; 2020 The Vibes Virtual Clinic. Designed &amp; Developed by <a href="https://www.geetechlab.com/">Geetech Lab</a> &amp; <a href="https://systems.minloans.com.ng.com/">Minsystems</a></p>
          </div>
          <div class="col-md-6 col-sm-12 text-md-right text-sm-left">
            <a href="#" class="p-2"><span class="fab fa-facebook-f"></span></a>
            <a href="#" class="p-2"><span class="fab fa-twitter"></span></a>
            <a href="#" class="p-2"><span class="fab fa-linkedin"></span></a>
          </div>
        </div>
      </div>
    </footer>
    <!-- END footer -->


    <!-- Modal -->
    <div class="modal fade" id="modalAppointment" tabindex="-1" role="dialog" aria-labelledby="modalAppointmentLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalAppointmentLabel">Login</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
              <form class="loginForm" action="{% url 'api-auth:login-api' %}" method="POST"> {% csrf_token %}
                <div class="form-group">
                  <label for="appointment_name" class="text-black">Unique Handle</label>
                  <input type="text" class="form-control" id="username" placeholder="Handle" required="required">
                </div>
                <div class="form-group">
                  <label for="appointment_email" class="text-black">Password</label>
                  <input type="password" class="form-control" id="password" placeholder="Password" required="required">
                </div>
                <div class="form-group">
                  <button type="submit" class="btn btn-primary btn-block">Sign In</button>
                </div>
              </form>
          </div>

          <div class="modal-footer">
              Don't Have An Account? <a href="{% url 'account-url:register' %}"> Sign Up</a>
          </div>

        </div>
      </div>
    </div>

    <div class="modal fade" id="modalAppointmentRoom" tabindex="-1" role="dialog" aria-labelledby="modalAppointmentLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalAppointmentLabel">Please Wait For The Room Key!</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
              A room key would be giving to you for virtual consultancy
          </div>

        </div>
      </div>
    </div>


    <script src="https://cdn.thevibesclinic.com/vvc/js/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.4/jquery-confirm.min.js"></script>
    <script src="https://cdn.thevibesclinic.com/vvc/js/popper.min.js"></script>
    <script src="https://cdn.thevibesclinic.com/vvc/js/bootstrap.min.js"></script>
    <script src="https://cdn.thevibesclinic.com/vvc/js/owl.carousel.min.js"></script>
    <script src="https://cdn.thevibesclinic.com/vvc/js/bootstrap-datepicker.js"></script>
    <script src="https://cdn.thevibesclinic.com/vvc/js/jquery.timepicker.min.js"></script>
    <script src="https://cdn.thevibesclinic.com/vvc/js/jquery.waypoints.min.js"></script>
    <script src="https://cdn.thevibesclinic.com/vvc/js/main.js"></script>

    <script>
    $( function () {
        'use strict';
        $(document).ready(function () {
            // Initialize data
            var loginForm = $('.loginForm');
            var loginFormMethod = loginForm.attr('method');
            var loginFormEndpoint = loginForm.attr('action');

            function displaySubmitting(submitBtn, defaultText, doSubmit) {
                if (doSubmit) {
                    submitBtn.addClass("disabled");
                    submitBtn.html("<i class='fa fa-spin fa-spinner'></i> Processing..");
                } else {
                    submitBtn.removeClass("disabled");
                    submitBtn.add(defaultText);
                }
            }

            var loginFormSubmitBtn = loginForm.find("[type='submit']");
            var loginFormSubmitBtnText = loginFormSubmitBtn.text();

            loginForm.submit(function (event) {
                event.preventDefault();
                // using jQuery
                function getCookie(name) {
                    var cookieValue = null;
                    if (document.cookie && document.cookie !== '') {
                        var cookies = document.cookie.split(';');
                        for (var i = 0; i < cookies.length; i++) {
                            var cookie = jQuery.trim(cookies[i]);
                            // Does this cookie string begin with the name we want?
                            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                break;
                            }
                        }
                    }
                    return cookieValue;
                }
                var csrftoken = getCookie('csrftoken');

                function csrfSafeMethod(method) {
                    // these HTTP methods do not require CSRF protection
                    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
                }
                $.ajaxSetup({
                    beforeSend: function(xhr, settings) {
                        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                            xhr.setRequestHeader("X-CSRFToken", csrftoken);
                        }
                    }
                });

                var loginFormData = {
                    "username": $('#username').val(),
                    "password": $('#password').val(),
                };
                console.log(loginFormData);
                var thisForm = $(this);

                displaySubmitting(loginFormSubmitBtn, "", true);

                $.ajax({
                        method: loginFormMethod,
                        url: loginFormEndpoint,
                        data: loginFormData,
                        contentType: 'application/x-www-form-urlencoded',
                        dataType: 'json',

                        success: function (data) {
                            loginForm[0].reset();
                            console.log(data);
                            // perform ajax call to view server
                            $.ajax({
                                method: "POST",
                                url: "{% url 'account-url:login' %}",
                                data: data,
                                contentType: 'application/x-www-form-urlencoded',
                                dataType: 'json',

                                success: function (data) {
                                    console.log(data);
                                    $.alert({
                                        title: 'Success!',
                                        content: 'Logged In Successfully!',
                                        theme: 'modern',
                                    });
                                    setTimeout(function(){
                                        displaySubmitting(loginFormSubmitBtn, loginFormSubmitBtnText, false)
                                    }, 500);
                                    setTimeout(function () {
                                        window.location.replace("{% url 'dashboard' %}");
                                    }, 5000);
                                }
                            });
                        }, error: function (error) {
                            console.log(error);
                            // var errorData = error.responseJSON('detail');
                            loginForm[0].reset();
                            $.alert({
                                icon: 'fa fa-warning',
                                title: 'Oops!',
                                content: "Error During Sign In!",
                                theme: 'white',
                                backgroundDismiss: true,
                                animationSpeed: 2000,
                            });
                            displaySubmitting(loginFormSubmitBtn, loginFormSubmitBtnText, false);
                        }
                    })
            })
        })
    } (jQuery));
</script>


    {% block js_scripts %}

    {% endblock js_scripts %}


  </body>
</html>